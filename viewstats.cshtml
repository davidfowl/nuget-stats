@{       
    var stats = NuGetStatistics.GetStatsHistory(100);
    var statDiffs = new List<object>();
    dynamic previous = stats.Last();
    foreach (var current in stats.Reverse().Skip(1)) {
        statDiffs.Add(new { Downloads = current.Downloads - previous.Downloads, LogTime = (DateTime)current.LogTime });
        previous = current;
    }
    
    var chart = new Chart(600, 300, themePath: "ChartTemplate.xml")
        .AddSeries(chartType: "Spline", xValue: statDiffs, xField: "LogTime", yValues: statDiffs, yFields: "Downloads")
        .AddTitle("Downloads")
        .Write(format: "png");
}
